{"id":"cd5d6bb4-a53b-4398-bfdf-daca38fba9a6","name":"cancelappointment","scenario_trigger":"cancelappointment","description":"used to cancel patient appointment","active":true,"updated":"2019-02-05T14:35:07.2440000Z","userDisplayName":"Bhanu Kandregula","code":"{\"version\":3,\"steps\":[{\"id\":\"3ee7da4d558f-3e5e5ebf0f209bdd-8b4c\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":234,\"yLocation\":10,\"next\":\"36964f8667c2-af62f54935d03631-869b\"},\"text\":\"'Sure, please enter your registered email Id.'\",\"variable\":\"email\",\"stringId\":\"stringId_acdccb15bc14a2b9\"},{\"id\":\"36964f8667c2-af62f54935d03631-869b\",\"type\":\"datasource\",\"designer\":{\"xLocation\":240,\"yLocation\":70,\"errorStepId\":\"66bcefeb99d1-781aeb72c1cfeb85-8ea6\",\"next\":\"9e6dae9349f2-d62adc98a546cfe0-be46\"},\"dataConnection\":\"\",\"urlBase\":\"'https://healthcarev2.azurewebsites.net'\",\"urlPath\":\"'/listAppointments'\",\"urlParams\":\"'email='+${email}\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"status\",\"error\":\"err\"},{\"id\":\"66bcefeb99d1-781aeb72c1cfeb85-8ea6\",\"type\":\"statement\",\"designer\":{\"xLocation\":120,\"yLocation\":110},\"text\":\"Server not responding, please try after sometime.\",\"stringId\":\"stringId_009de5cddb26f69c\"},{\"id\":\"9e6dae9349f2-d62adc98a546cfe0-be46\",\"type\":\"branch\",\"condition\":\"${status}.length \",\"designer\":{\"xLocation\":251,\"yLocation\":130,\"next\":\"e6b7e74173bd-207d3ccbf809dce7-df90\"},\"targetStepId\":\"5041adb9bf32-506993ae624efb85-5322\"},{\"id\":\"e6b7e74173bd-207d3ccbf809dce7-df90\",\"type\":\"statement\",\"designer\":{\"xLocation\":140,\"yLocation\":210},\"text\":\"'No appointments booked with the email Id.'\",\"stringId\":\"stringId_d26fe698282e44d9\"},{\"id\":\"9e833dd0b911-d67070c61e95bae3-3346\",\"type\":\"yesnoprompt\",\"dataType\":\"boolean\",\"designer\":{\"xLocation\":352,\"yLocation\":314,\"next\":\"dd1426704467-c992ff004f00e507-c56c\"},\"text\":\"'Would you like to cancel  it? Once you cancel it the slot may not be available.'\",\"variable\":\"confirmation\",\"maxRetries\":2,\"layout\":\"vertical\",\"stringId\":\"stringId_d6f697436972ca61\",\"attachment\":[{\"type\":\"Carousel\",\"carouselCode\":\"(function(){\\n    return [\\n        new builder.ThumbnailCard().\\n        buttons([ \\n            builder.CardAction.postBack(session,'Yes','Yes'), \\n            builder.CardAction.postBack(session,'No','No')\\n        ])\\n    ] \\n    })()\\n\"}],\"targetStepId\":\"5346b61b8d0c-73da6b2ee58653fc-b086\"},{\"id\":\"5346b61b8d0c-73da6b2ee58653fc-b086\",\"type\":\"datasource\",\"designer\":{\"xLocation\":480,\"yLocation\":360,\"errorStepId\":\"245b8f7e3f4a-1919e3e70694b7bb-24bf\",\"next\":\"461c0668d3d3-5d4c15f2c17c9759-5d3b\"},\"dataConnection\":\"\",\"urlBase\":\"'https://healthcarev2.azurewebsites.net'\",\"urlPath\":\"'/deleteAppointment'\",\"urlParams\":\"'id='+JSON.parse(${doctorConfirmation}).id\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"respo\",\"error\":\"err\"},{\"id\":\"245b8f7e3f4a-1919e3e70694b7bb-24bf\",\"type\":\"statement\",\"designer\":{\"xLocation\":380,\"yLocation\":429},\"text\":\"Server not responding, please try after sometime.\",\"stringId\":\"stringId_009de5cddb26f69c\"},{\"id\":\"ab9cb8f10ede-5f10d395c98f1220-f685\",\"type\":\"statement\",\"designer\":{\"xLocation\":687,\"yLocation\":409},\"text\":\"'Your appointment with '+JSON.parse(${doctorConfirmation}).doctorName+' on '+JSON.parse(${doctorConfirmation}).date+' at '+JSON.parse(${doctorConfirmation}).time+' has been successfully cancelled.'\",\"stringId\":\"stringId_4a49fa64b38ad892\",\"label\":\"\"},{\"id\":\"ed9bded66925-2ec90ae632e52e47-ee09\",\"label\":\"Wait\",\"type\":\"wait\",\"designer\":{\"xLocation\":347,\"yLocation\":260,\"next\":\"9e833dd0b911-d67070c61e95bae3-3346\"},\"time\":\"1000\"},{\"id\":\"dd1426704467-c992ff004f00e507-c56c\",\"type\":\"statement\",\"designer\":{\"xLocation\":253,\"yLocation\":396},\"text\":\"Thank you.\",\"stringId\":\"stringId_2d439011ecebc222\"},{\"id\":\"461c0668d3d3-5d4c15f2c17c9759-5d3b\",\"type\":\"branch\",\"condition\":\"${respo}\",\"designer\":{\"xLocation\":640,\"yLocation\":313,\"next\":\"dbeed9153d7e-29b3c5203354c417-ff5f\"},\"targetStepId\":\"ab9cb8f10ede-5f10d395c98f1220-f685\"},{\"id\":\"dbeed9153d7e-29b3c5203354c417-ff5f\",\"type\":\"statement\",\"designer\":{\"xLocation\":570,\"yLocation\":406},\"text\":\"'Something went wrong, please try again.'\",\"stringId\":\"stringId_e48ff262de087992\"},{\"id\":\"5041adb9bf32-506993ae624efb85-5322\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":320,\"yLocation\":200,\"next\":\"ed9bded66925-2ec90ae632e52e47-ee09\"},\"variable\":\"doctorConfirmation\",\"layout\":\"carousel\",\"attachment\":[{\"type\":\"Carousel\",\"carouselCode\":\"(function(){\\n    var doctors = [];\\n    for (var i =0 ; i < ${status}.length; i++) {\\n        doctors.push(new builder.ThumbnailCard().title(${status}[i].doctorName).subtitle(${status}[i].specialization).\\n        text(\\\"Date : \\\"+${status}[i].date+\\\"\\\\n\\\" +\\\"Time : \\\"+ ${status}[i].time+\\\"\\\\n\\\" +\\\"Address : \\\"+${status}[i].address).\\n        images([builder.CardImage.create(session,${status}[i].imageURL)]).\\n        buttons([\\n            builder.CardAction.postBack(session,${status}[i],'Cancel Appointment')\\n        ]));\\n    }\\n    return doctors;\\n    })()\\n\"}]}],\"returningMessage\":\"\",\"interrupting\":false,\"breaking\":false}"}