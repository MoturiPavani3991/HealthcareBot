{"id":"7aa758ae-fe40-4078-9518-3eb2cd16bf9c","name":"appointmentstatus","scenario_trigger":"appointmentstatus","description":"Helps to check appointment status","active":true,"updated":"2019-02-05T14:34:49.0380000Z","userDisplayName":"Bhanu Kandregula","code":"{\"version\":3,\"steps\":[{\"id\":\"642950313b9c-9dbcc6defc6dae88-2000\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":440,\"yLocation\":120,\"next\":\"c1439cfde75b-b76742c5a7adfbe2-0297\"},\"text\":\"'Please enter your registered email.'\",\"variable\":\"email\",\"stringId\":\"stringId_4b726fc6aa4edfb3\"},{\"id\":\"c1439cfde75b-b76742c5a7adfbe2-0297\",\"type\":\"datasource\",\"designer\":{\"xLocation\":440,\"yLocation\":180,\"next\":\"b5ef1428f012-3fcd0166ee5e214c-4152\",\"errorStepId\":\"a5985f48704b-ec0799d996900ce4-9462\"},\"dataConnection\":\"\",\"urlBase\":\"'https://healthcarev2.azurewebsites.net'\",\"urlPath\":\"'/listAppointments'\",\"urlParams\":\"'email='+${email}\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"doctors\",\"error\":\"err\"},{\"id\":\"0b30b9026576-70ca95d210b29c4a-3792\",\"type\":\"statement\",\"designer\":{\"xLocation\":751,\"yLocation\":532},\"layout\":\"vertical\",\"text\":\"\\\"Thank you\\\"\",\"stringId\":\"stringId_005ff1a0bf32650a\",\"attachment\":[{\"type\":\"Carousel\",\"carouselCode\":\"(function(){\\n    var doctors = [];\\n    for (var i =0 ; i < ${doctors}.length; i++) {\\n        doctors.push(new builder.ThumbnailCard().title(${doctors}[i].doctorName).subtitle(${doctors}[i].specialization).\\n        text(\\\"Date : \\\"+${doctors}[i].date+\\\"\\\\n\\\" +\\\"Time : \\\"+ ${doctors}[i].time+\\\"\\\\n\\\" +\\\"Address : \\\"+${doctors}[i].address).\\n        images([builder.CardImage.create(session,${doctors}[i].imageURL)]).\\n        buttons([\\n            builder.CardAction.postBack(session,\\\"Update Appointment\\\",'Update Appointment'),\\n            builder.CardAction.postBack(session,'Cancel Appointment','Cancel Appointment') \\n        ])\\n        )}\\n    return doctors;\\n    })()\\n\"}]},{\"id\":\"b5ef1428f012-3fcd0166ee5e214c-4152\",\"type\":\"branch\",\"condition\":\"${doctors}.length != 0\",\"designer\":{\"xLocation\":460,\"yLocation\":240,\"next\":\"547ef8c1d3a8-c92e9ca89294c3bf-ba07\"},\"targetStepId\":\"8e916517868b-fc180f5b33ef3999-1b79\"},{\"id\":\"547ef8c1d3a8-c92e9ca89294c3bf-ba07\",\"type\":\"statement\",\"designer\":{\"xLocation\":340,\"yLocation\":346},\"text\":\"\\\"I see you don't have any appointments booked.\\\"\",\"stringId\":\"stringId_c37c3004597ab843\"},{\"id\":\"a5985f48704b-ec0799d996900ce4-9462\",\"type\":\"statement\",\"designer\":{\"xLocation\":293,\"yLocation\":216},\"text\":\"Server not responding, please try after sometime.\",\"stringId\":\"stringId_009de5cddb26f69c\"},{\"id\":\"cfe505c57f22-290af4950ce121b1-e787\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":529,\"yLocation\":331,\"next\":\"67c4692eab7f-9ace48d2f6ffa82a-78e3\"},\"variable\":\"appointmentType\",\"layout\":\"carousel\",\"attachment\":[{\"type\":\"Carousel\",\"carouselCode\":\"(function(){\\n    var doctors = [];\\n    for (var i =0 ; i < ${doctors}.length; i++) {\\n        doctors.push(new builder.ThumbnailCard().title(${doctors}[i].doctorName).subtitle(${doctors}[i].specialization).\\n        text(\\\"Date : \\\"+${doctors}[i].date+\\\"\\\\n\\\" +\\\"Time : \\\"+ ${doctors}[i].time+\\\"\\\\n\\\" +\\\"Address : \\\"+${doctors}[i].address).\\n        images([builder.CardImage.create(session,${doctors}[i].imageURL)]).\\n        buttons([\\n            builder.CardAction.postBack(session,{\\\"doctor\\\":${doctors}[i],\\\"state\\\":\\\"Update Appointment\\\"},'Update Appointment'),\\n            builder.CardAction.postBack(session,{\\\"doctor\\\":${doctors}[i],\\\"state\\\":\\\"Cancel Appointment\\\"},'Cancel Appointment') \\n        ])\\n        )}\\n    return doctors;\\n    })()\\n\\n\"}],\"stringId\":\"stringId_62884ec817546905\"},{\"id\":\"67c4692eab7f-9ace48d2f6ffa82a-78e3\",\"type\":\"switch\",\"designer\":{\"xLocation\":510,\"yLocation\":420,\"next\":\"0b30b9026576-70ca95d210b29c4a-3792\"},\"cases\":[{\"value\":\"Update Appointment\",\"targetStepId\":\"14079b42c5e9-0c2e774264602285-ec1e\"},{\"value\":\"Cancel Appointment\",\"targetStepId\":\"dc0cc872da21-43e34f4a3b60fcaa-ce13\"}],\"condition\":\"JSON.parse(${appointmentType}).state\"},{\"id\":\"14079b42c5e9-0c2e774264602285-ec1e\",\"type\":\"beginScenario\",\"designer\":{\"xLocation\":474,\"yLocation\":520},\"scenario\":\"statusupdate\",\"variable\":\"statusupdate\",\"args\":\"JSON.parse(${appointmentType}).doctor\"},{\"id\":\"dc0cc872da21-43e34f4a3b60fcaa-ce13\",\"type\":\"beginScenario\",\"designer\":{\"xLocation\":613,\"yLocation\":520},\"scenario\":\"statuscancel\",\"variable\":\"cancelapp\",\"args\":\"JSON.parse(${appointmentType}).doctor\"},{\"id\":\"8e916517868b-fc180f5b33ef3999-1b79\",\"type\":\"statement\",\"designer\":{\"xLocation\":637,\"yLocation\":276,\"next\":\"cfe505c57f22-290af4950ce121b1-e787\"},\"text\":\"'I see you have the following appointment(s).'\",\"stringId\":\"stringId_62884ec817546905\"}],\"returningMessage\":\"\",\"interrupting\":false,\"breaking\":false}"}