{"id":"382a4de9-1013-4861-a095-6e7043d63858","name":"modifyAppointment","scenario_trigger":"modifyAppointment","description":"helps to modify the booking","active":true,"updated":"2019-02-05T14:35:46.2600000Z","userDisplayName":"Bhanu Kandregula","code":"{\"version\":3,\"steps\":[{\"id\":\"3ee7da4d558f-3e5e5ebf0f209bdd-8b4c\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":234,\"yLocation\":10,\"next\":\"36964f8667c2-af62f54935d03631-869b\"},\"text\":\"'Sure, please enter your registered email Id.'\",\"variable\":\"email\",\"stringId\":\"stringId_3ec8d671351eae33\"},{\"id\":\"36964f8667c2-af62f54935d03631-869b\",\"type\":\"datasource\",\"designer\":{\"xLocation\":240,\"yLocation\":70,\"errorStepId\":\"66bcefeb99d1-781aeb72c1cfeb85-8ea6\",\"next\":\"9e6dae9349f2-d62adc98a546cfe0-be46\"},\"dataConnection\":\"\",\"urlBase\":\"'https://healthcarev2.azurewebsites.net'\",\"urlPath\":\"'/listAppointments'\",\"urlParams\":\"'email='+${email}\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"status\",\"error\":\"err\"},{\"id\":\"66bcefeb99d1-781aeb72c1cfeb85-8ea6\",\"type\":\"statement\",\"designer\":{\"xLocation\":120,\"yLocation\":110},\"text\":\"Server not responding, please try after sometime.\",\"stringId\":\"stringId_009de5cddb26f69c\"},{\"id\":\"9e6dae9349f2-d62adc98a546cfe0-be46\",\"type\":\"branch\",\"condition\":\"${status}.length \",\"designer\":{\"xLocation\":251,\"yLocation\":130,\"next\":\"e6b7e74173bd-207d3ccbf809dce7-df90\"},\"targetStepId\":\"1b02b06e896c-a6c5b3f2da63b57c-c21d\"},{\"id\":\"e6b7e74173bd-207d3ccbf809dce7-df90\",\"type\":\"statement\",\"designer\":{\"xLocation\":140,\"yLocation\":210},\"text\":\"'No appointments booked with the email Id.'\",\"stringId\":\"stringId_d26fe698282e44d9\"},{\"id\":\"5346b61b8d0c-73da6b2ee58653fc-b086\",\"type\":\"datasource\",\"designer\":{\"xLocation\":380,\"yLocation\":308,\"errorStepId\":\"245b8f7e3f4a-1919e3e70694b7bb-24bf\",\"next\":\"317cafe8e9ab-d6a675ee11ff0b87-e518\"},\"dataConnection\":\"\",\"urlBase\":\"'https://healthcarev2.azurewebsites.net'\",\"urlPath\":\"'/updateAppointment'\",\"urlParams\":\"'email='+${email}+'&time='+JSON.parse(${appointmentDate}).TimeVal+'&date='+JSON.parse(${appointmentDate}).DateVal+'&id='+JSON.parse(${apptype}).id+'&oldDate='+JSON.parse(${apptype}).date+'&oldTime='+JSON.parse(${apptype}).time\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"updateres\",\"error\":\"err\"},{\"id\":\"245b8f7e3f4a-1919e3e70694b7bb-24bf\",\"type\":\"statement\",\"designer\":{\"xLocation\":292,\"yLocation\":360},\"text\":\"Server not responding, please try after sometime.\",\"stringId\":\"stringId_009de5cddb26f69c\"},{\"id\":\"ab9cb8f10ede-5f10d395c98f1220-f685\",\"type\":\"statement\",\"designer\":{\"xLocation\":580,\"yLocation\":460},\"stringId\":\"stringId_94265dabca90279b\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"Carousel\",\"carouselCode\":\"(function(){\\n    return [\\n        new builder.ThumbnailCard().title(${status}[0].doctorName).subtitle(${status}[0].specialization).\\n        text(\\\"Date : \\\"+${updateres}.date+\\\"\\\\n\\\" +\\\"Time : \\\"+ ${updateres}.finalTime+\\\"\\\\n\\\"+\\\"address : \\\"+${status}[0].address).\\n        images([builder.CardImage.create(session,${status}[0].imageURL)])\\n    ] \\n    })()\\n\"}]},{\"id\":\"b0952cc4697b-c71fe0c69c5225db-df1f\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":320,\"yLocation\":260,\"next\":\"5346b61b8d0c-73da6b2ee58653fc-b086\"},\"text\":\"\\\"Sure, for which date are you looking to schedule the appointment with \\\"+${status}[0].doctorName+\\\".\\\"\",\"variable\":\"appointmentDate\",\"stringId\":\"stringId_df942f8428480181\",\"layout\":\"carousel\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n\\t\\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n\\t\\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n\\t\\\"version\\\": \\\"1.0\\\",\\r\\n\\t\\\"body\\\": [\\r\\n        {\\r\\n\\t\\t\\t\\\"type\\\": \\\"TextBlock\\\",\\r\\n\\t\\t\\t\\\"text\\\": \\\"\\\"\\r\\n\\t\\t},\\r\\n\\t\\t{\\r\\n\\t\\t\\t\\\"type\\\": \\\"Input.Date\\\",\\r\\n\\t\\t\\t\\\"placeholder\\\": \\\"Due Date\\\",\\r\\n\\t\\t\\t\\\"id\\\": \\\"DateVal\\\",\\r\\n            \\\"value\\\": JSON.parse(${apptype}).date,\\r\\n            \\\"separator\\\": true\\r\\n\\t\\t},\\r\\n        {\\r\\n\\t\\t\\t\\\"type\\\": \\\"Input.Time\\\",\\r\\n\\t\\t\\t\\\"placeholder\\\": \\\"Time\\\",\\r\\n\\t\\t\\t\\\"id\\\": \\\"TimeVal\\\",\\r\\n            \\\"value\\\": JSON.parse(${apptype}).time\\r\\n\\t\\t},\\r\\n        {\\r\\n\\t\\t\\t\\\"type\\\": \\\"Input.Text\\\",\\r\\n\\t\\t\\t\\\"id\\\": \\\"description\\\",\\r\\n\\t\\t\\t\\\"isMultiline\\\": true,\\r\\n\\t\\t\\t\\\"placeholder\\\": \\\"describe your reason\\\",\\r\\n            \\\"value\\\": JSON.parse(${apptype}).reason\\r\\n\\t\\t}\\r\\n\\t],\\r\\n\\t\\\"actions\\\": [\\r\\n\\t\\t{\\r\\n\\t\\t\\t\\\"type\\\": \\\"Action.Submit\\\",\\r\\n\\t\\t\\t\\\"title\\\": \\\"Submit\\\",\\r\\n\\t\\t\\t\\\"data\\\": {\\r\\n\\t\\t\\t\\t\\\"id\\\": \\\"1234567890\\\"\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t]\\r\\n}\\r\\n\"}]},{\"id\":\"40a1342d0a23-913f6306bf431e44-efa5\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":320,\"yLocation\":200,\"next\":\"b0952cc4697b-c71fe0c69c5225db-df1f\"},\"variable\":\"apptype\",\"layout\":\"carousel\",\"attachment\":[{\"type\":\"Carousel\",\"carouselCode\":\"(function(){\\n    var doctors = [];\\n    for (var i =0 ; i < ${status}.length; i++) {\\n        doctors.push(new builder.ThumbnailCard().title(${status}[i].doctorName).subtitle(${status}[i].specialization).\\n        text(\\\"Date : \\\"+${status}[i].date+\\\"\\\\n\\\" +\\\"Time : \\\"+ ${status}[i].time+\\\"\\\\n\\\" +\\\"Address : \\\"+${status}[i].address).\\n        images([builder.CardImage.create(session,${status}[i].imageURL)]).\\n        buttons([\\n            builder.CardAction.postBack(session,${status}[i],'Update Appointment')\\n        ])\\n        )\\n        }\\n    return doctors;\\n    })()\\n\\n\"}],\"stringId\":\"stringId_62884ec817546905\"},{\"id\":\"317cafe8e9ab-d6a675ee11ff0b87-e518\",\"type\":\"branch\",\"condition\":\"${updateres}.status\",\"designer\":{\"xLocation\":440,\"yLocation\":340,\"next\":\"c7e24f2c80d9-4e0c5da637a519e6-3dde\"},\"targetStepId\":\"1511e763417d-c654d6b56cb7f7de-c7d3\"},{\"id\":\"c7e24f2c80d9-4e0c5da637a519e6-3dde\",\"type\":\"statement\",\"designer\":{\"xLocation\":367,\"yLocation\":440},\"text\":\"Something went wrong, please try again.\",\"stringId\":\"stringId_9e78ff392dee43a6\"},{\"id\":\"1511e763417d-c654d6b56cb7f7de-c7d3\",\"type\":\"statement\",\"designer\":{\"xLocation\":540,\"yLocation\":391,\"next\":\"ab9cb8f10ede-5f10d395c98f1220-f685\"},\"text\":\"'Your appointment with '+${status}[0].doctorName+' on '+${updateres}.date+' at '+${updateres}.finalTime+' has been succesfully updated.'\",\"stringId\":\"stringId_b82e544bdcf68e9e\"},{\"id\":\"1b02b06e896c-a6c5b3f2da63b57c-c21d\",\"type\":\"statement\",\"designer\":{\"xLocation\":397,\"yLocation\":116,\"next\":\"40a1342d0a23-913f6306bf431e44-efa5\"},\"text\":\"'I see you have the following appointment(s).'\",\"stringId\":\"stringId_62884ec817546905\"}],\"returningMessage\":\"\",\"interrupting\":false,\"breaking\":false}"}